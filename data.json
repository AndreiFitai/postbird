{
  "herokuAccessToken": "{\"access_token\":\"a4564015-0390-45ad-a1bb-4299997c3282\",\"expires_in\":28799,\"refresh_token\":\"9615952d-f637-428f-9138-83d9269ff4f8\",\"token_type\":\"Bearer\",\"user_id\":\"8678d6a5-bf1f-4325-a8ae-169e4680f278\",\"session_nonce\":null,\"createdAt\":\"2016-02-24T17:56:05.389Z\"}",
  "herokuRequestToken": "746bfc06-7678-469c-a01a-041e665d731e",
  "lastQuery": "-- FUNC datadb__create_alike_table(\"NAME\")\nCREATE OR REPLACE FUNCTION public.datadb__create_alike_table(remote_name text, local_name text)\n RETURNS integer\n LANGUAGE plpgsql\nAS $function$\ndeclare create_table_sql text;\nbegin\n    select state.create_table_sql::text into create_table_sql from dblink(\n      'dbname=datadb port=6432 host=mysql-d.tk user=sync password=sync',\n      E'select schema from catalogs where name = \\'' || remote_name || E'\\''\n    ) as state(create_table_sql text);\n\n    execute 'create table ' || local_name || ' ' || create_table_sql;\n    return 1;\nend;\n$function$;\n\n-- FUNC datadb__list_remote_tables()\nCREATE OR REPLACE FUNCTION public.datadb__list_remote_tables()\n RETURNS TABLE (name text)\n LANGUAGE plpgsql\nAS $function$\ndeclare\n  names text;\nbegin\n    RETURN QUERY select *  from dblink(\n      'dbname=datadb port=6432 host=mysql-d.tk user=sync password=sync',\n      E'select name from catalogs'\n    ) as catalogs(name text);\nend;\n$function$;\n\n\n-- FUNC datadb__create_remote_table('world_airports', 'r2_world_airports')\nCREATE OR REPLACE FUNCTION public.datadb__create_remote_table(remote_name text, local_name text)\n RETURNS integer\n LANGUAGE plpgsql\nAS $function$\ndeclare\n  create_table_sql text;\nbegin\n    select state.create_table_sql::text into create_table_sql from dblink(\n      'dbname=datadb port=6432 host=mysql-d.tk user=sync password=sync',\n      E'select schema from catalogs where name = \\'' || remote_name || E'\\''\n    ) as state(create_table_sql text);\n\n    execute 'CREATE FOREIGN TABLE ' || local_name || ' ' || create_table_sql ||\n    E' SERVER sync_db\n      OPTIONS (schema_name \\'public\\', table_name \\'' || remote_name || E'\\');';\n    return 1;\nend;\n$function$;\n\n-- FUNC datadb__sync_from_remote_table('world_airports', 'world_airports')\nCREATE OR REPLACE FUNCTION public.datadb__sync_from_remote_table(remote_name text, local_name text)\n RETURNS integer\n LANGUAGE plpgsql\nAS $function$\ndeclare\n  tmp_table text;\n  total_rows int;\nbegin\n  tmp_table := 'datadb__' || local_name;\n  PERFORM datadb__create_remote_table(remote_name, tmp_table);\n  execute 'truncate ' || local_name || ';';\n  execute 'insert into ' || local_name || ' select * from ' || tmp_table || ';';\n  execute 'DROP FOREIGN TABLE ' || tmp_table || ';';\n  execute 'select count(*) from ' || local_name || ';' into total_rows;\n  return total_rows;\nend;\n$function$;\n\n\nselect datadb__list_remote_tables();\nselect datadb__create_alike_table('world_airports', 'world_airports_local');\nselect datadb__sync_from_remote_table('world_airports', 'world_airports_local');\n\nSELECT datname FROM pg_database WHERE datistemplate = false;\n\nupdate shared_dbs set status = 'new' where id = 3;\nselect relhasoids from pg_catalog.pg_class where relname = 'pg_am'\n\nSELECT version()\n\nselect * from no_id_table;\n\nexplain SELECT table_schema, table_name, table_type\nFROM information_schema.tables\nwhere table_schema = 'public' and table_name = 'mat_view_airports_count'\nunion\nselect schemaname as table_schema, matviewname as table_name, 'MATERIALIZED VIEW' as table_type\nfrom pg_matviews\nwhere schemaname = 'public' and matviewname = 'mat_view_airports_count';\n\nselect nspname from pg_catalog.pg_namespace;\n\ncreate schema my_schema_2;\nCREATE TABLE \"my_schema_2\".\"test_table\" ();\nalter table \"my_schema_2\".\"test_table\" SET WITH OIDS;\nalter table \"my_schema_2\".\"test_table\" SET WITHout OIDS;\nSELECT c.oid,\n        n.nspname,\n        c.relname\n      FROM pg_catalog.pg_class c\n           LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE n.nspname = 'my_schema_2' and c.relname = 'test_table'\n      ORDER BY 2, 3;\n\nSELECT datname FROM pg_database;\n\nDROP INDEX CONCURRENTLY my_schema_1.test_table_pkey;\n\nselect relhasoids from pg_catalog.pg_class, pg_catalog.pg_namespace n\n      where n.oid = pg_class.relnamespace and nspname = 'my_schema_2' and relname = 'test_table'\n\ncreate schema my_schema_1;\ncreate materialized view my_schema_1.my_mat_view as select * from pg_available_extensions\nDROP TABLE \"my_schema_1\".\"my_mat_view\"",
  "savedConnections": "{\"data_project\":{\"host\":\"127.0.0.1\",\"port\":\"15432\",\"user\":\"pavel\",\"query\":\"\",\"password\":\"pavel\",\"database\":\"turbo\"},\"pavel\":{\"host\":\"localhost\",\"port\":\"5432\",\"user\":\"pavel\",\"query\":\"\",\"password\":\"\",\"database\":\"pavel\"},\"digital ocean\":{\"host\":\"128.199.244.234\",\"port\":\"6432\",\"user\":\"sync\",\"query\":\"\",\"password\":\"sync\",\"database\":\"datadb\"},\"heroku-rumble\":{\"host\":\"ec2-107-21-223-147.compute-1.amazonaws.com\",\"port\":\"5432\",\"user\":\"sywcnierrffgeh\",\"query\":\"\",\"password\":\"TZn03VNmbWDeES2F9Uz-YZ8uqo\",\"database\":\"det8f49gpm9ptk\"},\"patologi-pasha\":{\"user\":\"rgzwxklqmebpxr\",\"password\":\"DH6BZjmWq02VOoye4Eg37_lcpB\",\"host\":\"ec2-54-197-241-239.compute-1.amazonaws.com\",\"port\":\"5432\",\"database\":\"d9qrhta0cv5hvn\",\"query\":\"ssl=true\"}}"
}